<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>Git2ami by thiagorondon</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Git2ami</h1>
        <h2>Create a new Amazon Machine Image from a git repository.</h2>

        <section id="downloads">
          <a href="https://github.com/thiagorondon/git2ami/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/thiagorondon/git2ami/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/thiagorondon/git2ami" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a name="git2ami" class="anchor" href="#git2ami"><span class="octicon octicon-link"></span></a>git2ami</h1>

<p>Create a new Amazon Machine Image from a git repository.</p>

<p>You need just bash script and Amazon EC2 API Tools.</p>

<ul>
<li><a href="http://www.gnu.org/software/bash/">http://www.gnu.org/software/bash/</a></li>
<li><a href="http://aws.amazon.com/developertools/351">http://aws.amazon.com/developertools/351</a></li>
</ul><h1>
<a name="how--why-" class="anchor" href="#how--why-"><span class="octicon octicon-link"></span></a>How ? Why ?</h1>

<p>You just need a ".git2ami" file in your repository with all instructions for build your new AMI.</p>

<p>It's a good way to manage changes, continuous integration and auto-scaling in Amazon EC2.</p>

<h1>
<a name="synopsis" class="anchor" href="#synopsis"><span class="octicon octicon-link"></span></a>Synopsis</h1>

<pre><code>$ ./git2ami user@repo.domain.org:app.git tmpdir
ami-ca20XXXX

$ GIT2AMI_DEBUG=1 git2ami user@repo.domain.org:app.git tmpdir
- Create instance i-4d5dXXXX
- Check if instance i-4d5dXXXX is running.
- Get IP address ... ec2-54-214-000-00.us-west-2.compute.amazonaws.com
- Stop instance i-4d5dXXXX
- Check if instance i-4d5dXXXX is running.
- Check if instance i-4d5dXXXX is running.
- Create AMI
- New AMI is ami-9020XXXX

</code></pre>

<h1>
<a name="cookbook-for-git2ami" class="anchor" href="#cookbook-for-git2ami"><span class="octicon octicon-link"></span></a>Cookbook for git2ami</h1>

<pre><code>#
# .git2ami config
#

# Debug - Print a lot of messages.
# If you comment this line, just print errors or new AMI.
# GIT2AMI_DEBUG=1

# Define base AMI for deploy git repository
FROM=ami-6aad335a

# AWS instance type
INSTANCE_TYPE=t1.micro

# Specify REGION as the web service region to use.
REGION=us-west-2

# Private key to use
KEY_PAIR=justtest

# Private key file
PEM=$KEY_PAIR.pem

# Specifies the security group (or groups if specified multiple times)
# within which the instance(s) should be run. Determines the ingress
# firewall rules that will be applied to the launched instances.
SECURITY_GROUP=default

# Extra parameters for ec2-run-instances
EXTRA_EC2_RUN_INSTANCES=

# SSH port
SSH_PORT=22

# SSH username
SSH_USER=ubuntu

# The PREFIX name of new AMI.
PREFIX_AMI=GIT2AMI

#
# Deploy
#

PACKAGER=aptitude
PACKAGES="build-essentials nginx"

RUN=scripts/deploy.sh
</code></pre>

<h1>
<a name="no-warranty" class="anchor" href="#no-warranty"><span class="octicon octicon-link"></span></a>NO WARRANTY</h1>

<p>This software is provided "as-is," without any express or implied warranty. In no event shall the author be held liable for any damages arising from the use of the software.</p>

<h1>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>LICENSE</h1>

<p>GPLv3</p>
      </section>
    </div>

    
  </body>
</html>